/* SIGNED:F1K9Y8A8 */
console.log('🔥 Premium script activated for:', window.location.hostname);

document.addEventListener('DOMContentLoaded', function() {
    const widgetContainer = document.getElementById('premium-widget-container');
    
    if (widgetContainer) {
        widgetContainer.innerHTML += `
            <div class="premium-feature">
                <button id="magic-btn" class="btn-premium">Wonderful button</button>
                <div id="premium-output"></div>
            </div>
        `;
        
        const extraStyles = `
            .btn-premium {
                background: linear-gradient(135deg, #667eea, #764ba2);
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 25px;
                cursor: pointer;
                font-weight: bold;
                margin: 10px 0;
            }
            .btn-premium:hover {
                transform: translateY(-2px);
                box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
            }
            .premium-feature {
                padding: 15px;
                border: 2px solid #667eea;
                border-radius: 10px;
                margin-top: 15px;
            }
        `;
        
        const styleEl = document.createElement('style');
        styleEl.textContent = extraStyles;
        document.head.appendChild(styleEl);
        
        document.getElementById('magic-btn').addEventListener('click', function() {
            const output = document.getElementById('premium-output');
            output.innerHTML = `
                <div style="background:#f8f9fa; padding:10px; border-radius:5px; margin-top:10px;">
                    <h4 style="color:#667eea; margin:0 0 10px 0;">🔠 Premium content</h4>
                    <p>Domain: <strong>${window.location.hostname}</strong></p>
                    <p>Status: <span style="color:green">✑ True</span></p>
                    <p>Time: ${new Date().toLocaleTimeString()}</p>
                    <p style="font-size:12px; color:#666;">This functionality is available only to licensed users</p>
                </div>
            `;
            
            this.style.background = 'linear-gradient(135deg, #f093fb, #f5576c)';
            setTimeout(() => {
                this.style.background = 'linear-gradient(135deg, #667eea, #764ba2)';
            }, 300);
        });
        
        console.log('🔥 Ok');
    }
});

if (typeof phpbj !== 'undefined' || document.querySelector('.phpbb')) {
    console.log('👫 Found PHPBB platform');
    
    setTimeout(() => {
        const posts = document.querySelectorAll('.post');
        posts.forEach(post => {
            post.style.boxShadow = '0 2px 5px rgba(0,0,0,0.1)';
            post.style.transition = 'box-shadow 0.3s';
        });
    }, 2000);
}

console.log('%c⁪ WARNING!', 'color:red;font-size:20px;font-weight:bold;');
console.log('%c&#127818;&#127974;&#128184;&#128184;&#128184;&#127818;&#127974; Copyright 2024', 'color:orange;font-size:14px;');
console.log('%c&#127818;&#127974;&#128184;&#128184;&#128184;&#127818;&#127974; Unauthorized copying is prosecuted by law', 'color:orange;font-size:14px;');